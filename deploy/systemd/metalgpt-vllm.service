[Unit]
Description=MetalGPT vLLM
After=network.target

[Service]
User=metalgpt
WorkingDirectory=/opt/metalgpt
EnvironmentFile=/opt/metalgpt/backend/.env
ExecStart=/opt/metalgpt/venv/bin/vllm serve nn-tech/MetalGPT-1 \
  --host 127.0.0.1 --port 8000 \
  --max-model-len 16384 \
  --gpu-memory-utilization 0.90 \
  --enable-chunked-prefill \
  --max-num-seqs 24 \
  --max-num-batched-tokens 12288 \
  --api-key ${VLLM_KEY}
Restart=always
